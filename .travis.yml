# Copyright (C) 2020  Atos Spain SA. All rights reserved.
# 
# This file is part of the FAIR4Health Portal Backend.
# 
# This file is free software: you can redistribute it and/or modify it under the 
# terms of the Apache License, Version 2.0 (the License);
# 
# http://www.apache.org/licenses/LICENSE-2.0
# 
# The software is provided "AS IS", without any warranty of any kind, express or implied,
# including but not limited to the warranties of merchantability, fitness for a particular
# purpose and noninfringement, in no event shall the authors or copyright holders be 
# liable for any claim, damages or other liability, whether in action of contract, tort or
# otherwise, arising from, out of or in connection with the software or the use or other
# dealings in the software.
# 
# See README file for the full disclaimer information and LICENSE file for full license 
# information in the project root.

language: java

sudo: false

cache:
  directories:
    - "$HOME/.m2"
    - "$HOME/.sonar/cache"

env:
  global:
    - secure: "ZmxwVhE6cfSiYLOsPOkWOMmDnLylAiLwgKj6DEi5MaxkW7V3HIgg3BY8B0tQIg9KHzW7naj7KjAZXQmRJ1CwJCyJ4PLvQUtQu6sYn+j5Cutc4sLhakZe148VwjLsswVjNB0G7/O/0QS9u1fhcYlJgJ2qS8WTuCpbyAxAg4/kNU0G8yIqQilKVUHUKCCNAtLBE4HEsP/Yy9U2f78wYrapluQa6I2gQh3q1FeDDiQOkmydqA3zDrZiHwA5yDiprpFaS/7KjiHPJVkcrl3tesaRHXjMqO9O6ZGec1aiWtx5inqabaUJnVYctAtp1VpY/mt2w0PWBlrku2n0+7sjmlUSQkvmaA+CxS5CmQ4nNJcfrMXRHriaFsD4ouR6rtu82jPZBW05AE8cPDKusmhPNNrsHf+JmDfStdAaSZgj+wpSWAqfceW79HydD4IAoHHgP68H2pzuAi6ibMrSc13LPYDqu34hsAHN4NAjRbMiR6cty3AQcuHX82pP+rq2RCHh11to+bZwsKAPSymTA5FwJtIzwflu4GFD4UBCd0QDz9HP8fOY+/aTHahBvHAxM4/QdY74BijO+3EliBmj7YAtkqYhCgU199Arb/eJYzl0IXt5A35tHpGCDtiPRqXOhjaaDBEJvGPHasGAMM4WM6ohQ9wc5I1kny+4iArD1Eo69yKK41M="
    - secure: "Qs19jd8z033g5y+nl5imFOEtX5bA+9FOk/5HuKFSOQ6InaYeV90726fGKryYX2LhOugQnX/Pfz4D+fMyAGJGr4FCiCjyN+KQFVy8Iew/+hY4v3p8m0exzYdJi7BJG0VSp9mCofkBqJwxCC9tBDigzdW5hF324Z7FUwP3R+3+rNYcJPpXnEPA70NxMTtyKrVx/GyFZatGs/+NV1N1YEGKsTlJ/GmMB75ROvMWRtPTwdBOTPYvLtX85MI15gN0kPnA8JBxTnsu9+Lqmxcpo4dZJzGQcTyukHtGVGFJJrBm0l37P/naCwQ1P5gY6K2ayNHTWJePjODFoSjtAuorWJQEJZH/fQl0kCw7y0aAi4gkxL5L9vFg0cMrq5+EiXktxN66GsUjRo2SOVhjwpj1WBP+u1J2owc0nAQ3IX0wk7Y6u2RFRXT2hPtyFmjZOdCNEmNyNHMUyCX91XSw2Kpb6x65Es7c6cCm6XlMxoq+m8kSJIuK/0aOBR8Jjs1vZQrmZUVZuVp1gulZry+7ScZ0TeocevJ2QZh9zERd8SOPJhRz3mcPquQP8iH7zVWWdPnp+8Wo77CNXCJdC6xUpKv4VMZFVO3m2VtjVY5c1RAOCcJEbDIOd4SnX34s6J73MXHyQt38l3D/sYcD7O3wbGshovoe0i1NU5Kxu1ygyIt/MSKIn5Q="
    - secure: "efz51bCEC6Ul2tDrmv2lZtlgATrFxSkI2k/v6GVEDnmNqevS++kxU4jlUB41puozmzWNxFcl8J1/WY+ouV2nZGnZSDjFAVZVKaqLTdSk4xqbnSvXRhkJFAW9BvZN+n9tLxioiM+fto4EWSn6NlDh11tEHxUB37VhvBnnCRtbEllcXccw5B/Yq9lHroxyh3TaZwUX2Z2BzoAP6pWqhPONZPB4NRfH6nVM9k0qYQPp73GTn3IxsahAW2FBxcGG2yum+klY3TgfXpK0uOopY6MKyq9sUIiMv3YFBEaTacPYkMSwRowSHwdLaTPDwzlQ+gGjLnor9AFFNuiq4/DBv2PE5IogK5SgMJVEmruAwMAm7Jn60q8axXlwbh5zc60KgSUuY5odh/B+fTWPrBOqKe7vAZWvWFOueT0lZVnxzIqBGQ89mNxwy/pMkM0sfOmae0vMGXG7wNJX4XJ5HrT5HxJO8uEZTi1NX7g4j4WyvO1iYiJj1WBp8IqtcJkUDavsPC3Wn8TLsiUULrsV71ynUJ9zgd/qnpkU2K369WefzOWRuY8h6KSJ4bqi3FZuypQWYbUqPGcg4r3tJJLk+MpWTJuEhQ/gejjbCs72hchfxN9MS2ewuZumS3rrnjzQIZnEE5WnJ59WPigiPgOv8QBHlcRnCD2Npv3GTTpzoL7oUxQmT6E="
    - secure: "MtjpXo07yCPh5dIqvPykkO3lJEGfBbqaRs9lCHzIe0v7K9AIdUEDRc2kdtS80oQ2uXP1RuC5SxTz8chce5V0HmnGnPSZ0WSVvjIisO/Bjt7zJV5vsxdFqkQ481gxS7dz5wQbX+iwQ1X/BFjAUv8qRtDCpMh94LdDUuYPnojrT1KzpX0plRa17zhk+IR0hOjnYoGKTkowWNQvRcQZtIDGLccwwqJXY8PTECofMxcdv0YKfDjfk+tgFRj8NhUcbTJjTViCiVcKu6t/IRDt6HufkJcnLjozM3hi7Lb3J0uu4Qfi9dr/oKBdRG0ebKrfMEYP3Nn/CHHTtdk5CFlcZ6N+xtgIdkf4o3KZALIPgCs5VbcTqgxnnbSHYLETSRV6Ra3p3JrqRdL/fBngB9sb3kwygFqki17zb6IzTVzqTSm5Ey2QJAm0jufK6z5jyG1T+zOJdqo7QzKIz2HXcRIx8dVmlUeD7eqktWpFP+F+ECwZEBCOH0kNqS118E3IHCNeS6IOtCdDsjJC8SvaKf4vBfSp7CHvYvLGgyPI/w3RrIpBog59JfWXZN59OvCtGWCQWJptP0DGlDiDmIdOZzn+gCUe7XErezoDyU24LtZEORT/M2aU5xlKO+vHclLgGyVuiEwgdl1uikMLp2AkXs0vNbStt05BtQqugZVZvQbP8f4NvpY="
    - secure: "Icw2dJ/7i5RmLqnVzxtYwXTxFWsPB9hecrt4luU5fIXAF/kcH5mXiY8TLgx1LeaT3B6bzBSZHv6VPuIdfdv0FlwD8j48Hj8vAdRWlwd8oBIcowxzvUELZ/Oomka+X1aYgYCUcZqfUFXO8SC4pl7Dt+QMyfcsAm1Ri7fb59mIQdeckoHlWze5GDWZORmUV5p44+IT/HTF6E+08Bnm7b5l7vEO2qLT6WcNjwC653dF5xXRCB5G2zpxFRhwDtRleXegFVDBGwPkk80CZb+sV/gC2ld3KMJvaQt/0Q1T3WyLKocF4umUD1PhY+e37AZl8wMYoLn2XK/PmViCZcng+pN2XYRs4g5UIdjkMlQ/D12k+BZ+sulRkHF12bWB1Yi1mvNXgpgc7fBayCA7DpzxxDGtVUc6gXoF5nO65ADq13F3omMsG3EJYazrwrNQSkGPk6lwK3v8WwbSYPtdkzGs94LQBq1rqZr0Ry1uX5d7DKPZsAGWQ4T1JUnxAztpJSgtct0rIc0MKNSqBJNEpg7FqXlT97Y64V2huT1LtMrJbkwvDt8m2id4UIx4d3gU3nAwOcCqFjlhtGyYKj1hiEwWmsfCIxmTJBoMda4hnv8xBPzF3qY7GMxattE7ZehHj0Osr8kfgvVGuseLpVlrMxtn4bbGKq39b5Ozgru3R9cEqLKCwGc="
    - secure: "bRvmzVzwQrcu2oLahIrWEj/WizxTmUdpBz8dhSfnUxDMH0ea0qJDrGC4fqdK4gpDRQRfNY03ajyDgFZkNT0lGP23CeJD3C0LgPJAxyB83dJBR8pB46NwuhQs6AxrCIvdwMsJXArddwc9HlGok/OtwZBpmA+F+NBjs/+8nZwBjoKBQmKOXr0acV2mxFcWb/rr78lJ1qtOu57uNofAFn+pq5OYah/Umh4xUDgxVBjR+nqx1UB41ya3iWb6Yq4gsL2vVY160WByCDPsnRL2ua8rHEnSgWUa3jvPzQTDnu8CJ6Yo1aS52vvIOUJcIdxR0Ee4+a5SEd7Kl9OFeaI2l7SdAtw6SLLo+cZFAWsUTTbqi4eHhAQSS5yijAaostR+o5B4eBWviPAyL6uKQjLCdbO3kr9cHoOwHWyJyZrPTaRRd4BZ3JLrn9dXS+0Ec5SsCsUNmyfmlHbVC3xr8n8BN3Lzy8wWzU0Gv0JSZ36c2ch6ah2MB6wl/dQv1Mzf9m9BlhBdGjRP/isdJJqCs4IclojmzuQXGq0e7vFsrga80D7MfYpqGRw/37tmE6umeEembelA2F+kk9zouw2p1OnWwjx383TckvGzPa5hl0KgAKC8RrohJQY7ZB9+b5bqKDGZhEOsBtAqqWd3BZOGs60ONq4R+qrznWabBiUo81EG20q8Nck="
    - secure: "Qez3zXk1UHbloYDWDxd8Y2B2+Bdgmr5Y2K943Ltpl1yZLVQJQvHB0kAFmv0QWIxrqxmnD38hPmC+QDhb8rEu75bcRti+EU2jTTNif1NJoPISHUo98BOZCu0XKSdoYu8cbaJxv4GQCk/V05JEic4O8b9tyIjm2dvr0hw90z10QVThJfqiSVWUUdlQUfaTtsJnYexAYAA5ECAcBoAQ2ZpPqtJA4w6ZxtoJnfYcMajl47UrSXHHwgoQMJO6gUGz5GiKwPjYJ8f4oqxLPnm2MWqMhnulXV5wMsi9+mKHRAbFGsoJlHddD9ZSQSBfTPR1wJrv+zIuZIIM4vig+H+zBUSb33nV5l3vMRAn1Hvtyr22DAfqTcZbFjQQ1RuM06m9UhUAXRu0R1hyYp41SJxNZFB9GcPJTmX6W+NwhH7khkyPRVIyyIxXz2U9NO6JwS1JAMWr2kP3O2T/uF8vJBFp2WM3uSNlCSrUUY4r6SGj/I4mHo2y/jkVmyC9HOZp6Nxt1jVCALzPIv5PMR9Q3FqJhp/w73nUrsGqaAQh4wqP7ZDrU6gNonhpG1k5lLwejZLZkgzp3lX5KKREvBTqWXe904a5wb/RLuLzmcBdRvS0oMRQGCeb0fWCAR8qIQNt5jA4K7c+1C3vivtJA12Qnh6AD58nKikM5lQ2RyEWOyH6nIYjuOI="
    - secure: "MXXqsliR5zALaAHv/4LUvIo0sw1yh5QMX4M1MV65e65Z3PQG0OMjRJD0XHFepIr0bSVkAxTfZ7zHDRqNFkCnXBezA2KM5acZ8YudBYpaI+D04JBn1q5gK0+wSiaXcpypx3mW4i4n/4FmOZTkQ2i2EEw6+DPznCUC5XU6vibLBCzSh724Q2/6+kmOgOiEndHXihcOL+YjhYMGVaXvMuK0J7FFw6aVowsvY+MRdVyEEq+LEnPigUfgtbwgy2E9yDaP8r+3nzGA+D7Lpnz6ItYrAuTWvL62fqhQDSpptLft6maBxLl0XFBhq/QaY4QEUT07JzokRIY96gpgL3ZlKgm/zs73nv7EPwtC8G6yXi4amublcHAQ3EjyEwAfHS+RyHm+PbJvvAp1RPTiEDgOT2nghL6e0QCYbo/jCP6TvApKy6rot0hIN2LMt/YJ7bTcbRzC9bN6bPzFbzvU5ivxNtjVsaU+f4iFYR2MyXPz3EB7uud7YDxn7HOtQov0AgPDZLJ9bRFF79Sq4iTWKtgVFW1TgTVtyFQqvvNaX8VNEWBahfDsWDWrv4BI+gj2hqvzVeMoyaAnl+kB4VhTCkaU7lwBbdP6y4xjUMypbVJq9HfnjCPmvsrlbboOI46sI7Tn3fLz3zIxqeXWaf1kpQtNuN80lmQJrK5ScD13rcBOSNvGJl8="
  
addons:
  sonarcloud:
    organization: "fair4health"
    token:
      secure: Vznn9955w3roNz0F8PSN3Mydrph99ONXh1sf/sWITA9vFDe+X2IXp+EFPUAoHqodpbAt7D2cULmM6dkIS7hRRnqhO1jE98yGxyIBgnV18b3k/+R0DrTD+ckowDPHHuGzBF5UxOFoPDAa9e9905dA80PxeWZ7w5heb++XEWUasspFnbXOJ2JCjjmrV1CA4tiwr8wLsliTZ1j5JBWP+06BT4cFKdsOsRphfu5PMmxeO0ETnYLBPFP8i1O4vPVc+jBP47dCPNk9lAwrf53r5ebwTBzPsqLlppxw/t+4eJ/ifxOWn1jb33DUdgsu6iq2ksVQwcsigVg60EwipGTokOeuscYmUqOXEOLTagN94KHGytCCUQIN9rtmzus8v2BXHuf3bUMpCNdeM2jTDiwk2SAxvspefsefP4b8cAPmcvj/BIdl13PcQTBlQVn93XeZfp2cexngjaxjO7F3zPRfupc4o/j9QSmuORc50390eZTlXQHKs+pTrfWBoQDSTTz6SJuz/RzR6Zahhq2JimUYBQ4rrSOzwfvQyB+a1NFFx1SnpJkH2wV9DwoQnbrPdOGLRYUPSPFFG3FIJEPkUQ0phhzvtmiiM0zxBoV24JZ+0WQHhVvAdL9X+jL5HLyKhBIKY5dK+KSOmo2FbboHeWZtKm1PrbaqVFWwycSa+/rXwY66PwY=
    branches:
      - master      
script:
  - if [ "$TRAVIS_PULL_REQUEST" = "true" ]; then mvn clean test; mvn package -Dmaven.test.skip=true; mvn sonar:sonar; fi
  - if [ "$TRAVIS_BRANCH" = "master" ]; then mvn clean test; mvn sonar:sonar; fi
  - if [ "$TRAVIS_BRANCH" = "release" ]; then chmod +x .travis/prepare.sh && .travis/prepare.sh; mvn -s .travis/settings.xml -B release:clean release:prepare; git push --tags; mvn -s .travis/settings.xml -B release:perform; chmod +x .travis/push.sh && .travis/push.sh; fi

after_success:
- bash <(curl -s https://codecov.io/bash)
